admin_base_path: "/admin"

lua_routing:
  enabled: true
  scripts_dir: "./scripts"

tenants:
  # API tenant for api.keystone-gateway.dev
  - name: "api-production"
    domains:
      - "api.keystone-gateway.dev"
    lua_routes: "api-routes.lua"
    health_interval: 30
    services:
      - name: "httpbin-primary"
        url: "http://httpbin-1"
        health: "/status/200"
      - name: "httpbin-secondary"
        url: "http://httpbin-2"
        health: "/status/200"

  # Main domain tenant
  - name: "main-production"
    domains:
      - "keystone-gateway.dev"
    health_interval: 30
    services:
      - name: "jsonplaceholder"
        url: "http://jsonplaceholder-mock"
        health: "/"

  # Load balancing demonstration
  - name: "lb-production"
    path_prefix: "/lb/"
    health_interval: 30
    services:
      - name: "backend-1"
        url: "http://httpbin-1"
        health: "/status/200"
      - name: "backend-2"
        url: "http://httpbin-2"
        health: "/status/200"
      - name: "backend-3"
        url: "http://jsonplaceholder-mock"
        health: "/"